{"remainingRequest":"E:\\project2\\project-allocation-web\\node_modules\\babel-loader\\lib\\index.js!E:\\project2\\project-allocation-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\project2\\project-allocation-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\project2\\project-allocation-web\\src\\views\\announcement\\upload\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\project2\\project-allocation-web\\src\\views\\announcement\\upload\\index.vue","mtime":1623142371019},{"path":"E:\\project2\\project-allocation-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\project2\\project-allocation-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\project2\\project-allocation-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\project2\\project-allocation-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRTovcHJvamVjdDIvcHJvamVjdC1hbGxvY2F0aW9uLXdlYi9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMiI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBUaW55bWNlIGZyb20gJ0AvY29tcG9uZW50cy9UaW55bWNlJzsKaW1wb3J0IGFubm91bmNlbWVudEFwaSBmcm9tICdAL2FwaS9hbm5vdW5jZW1lbnQnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYW5ub3VuY2VtZW50OiB7CiAgICAgICAgY29udGVudDogJycsCiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGlkOiAnJywKICAgICAgICBhdXRob3JJZDogJycKICAgICAgfSwKICAgICAgZXJyb3I6IHsKICAgICAgICB0aXRsZTogewogICAgICAgICAgaXNTaG93OiBmYWxzZSwKICAgICAgICAgIG1lc3NhZ2U6ICdUaXRsZSBjYW5ub3QgYmUgZW1wdHknCiAgICAgICAgfSwKICAgICAgICBjb250ZW50OiB7CiAgICAgICAgICBpc1Nob3c6IGZhbHNlLAogICAgICAgICAgbWVzc2FnZTogJ0NvbnRlbnQgY2Fubm90IGJlIGVtcHR5JwogICAgICAgIH0KICAgICAgfQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsnY3VycmVudEFkbWluJ10pKSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQ7CgogICAgaWYgKGlkKSB7CiAgICAgIHRoaXMuYW5ub3VuY2VtZW50LmlkID0gaWQ7CiAgICAgIGFubm91bmNlbWVudEFwaS5nZXRBbm5vdW5jZW1lbnRJbmZvKHRoaXMuYW5ub3VuY2VtZW50LmlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIF90aGlzLmFubm91bmNlbWVudCA9IHJlc3BvbnNlLmRhdGEuYW5ub3VuY2VtZW50OwogICAgICB9KTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdvdG86IGZ1bmN0aW9uIGdvdG8ocGF0aCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaChwYXRoKTsKICAgIH0sCiAgICBjbGVhckVycm9yOiBmdW5jdGlvbiBjbGVhckVycm9yKGxhYmVsKSB7CiAgICAgIHRoaXMuZXJyb3JbbGFiZWxdLmlzU2hvdyA9IGZhbHNlOwogICAgfSwKICAgIEFkZEFubm91bmNlbWVudDogZnVuY3Rpb24gQWRkQW5ub3VuY2VtZW50KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGlmICh0aGlzLnZhbGlkYXRlQmVmb3JlQWRkKCkpIHsKICAgICAgICBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkKSB7CiAgICAgICAgICBhbm5vdW5jZW1lbnRBcGkudXBkYXRlQW5ub3VuY2VtZW50KHRoaXMuYW5ub3VuY2VtZW50KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywKICAgICAgICAgICAgICBtZXNzYWdlOiAnVXBkYXRlIFN1Y2Nlc3NmdWxseScKICAgICAgICAgICAgfSk7CgogICAgICAgICAgICBfdGhpczIuJHJvdXRlci5wdXNoKCcvYW5ub3VuY2VtZW50L2xpc3QnKTsKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmFubm91bmNlbWVudC5hdXRob3JJZCA9IHRoaXMuY3VycmVudEFkbWluLmlkOwogICAgICAgICAgYW5ub3VuY2VtZW50QXBpLmFkZEFubm91bmNlbWVudCh0aGlzLmFubm91bmNlbWVudCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgbWVzc2FnZTogJ0FkZCBTdWNjZXNzZnVsbHknCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgX3RoaXMyLiRyb3V0ZXIucHVzaCgnL2Fubm91bmNlbWVudC9saXN0Jyk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB2YWxpZGF0ZUJlZm9yZUFkZDogZnVuY3Rpb24gdmFsaWRhdGVCZWZvcmVBZGQoKSB7CiAgICAgIGlmICghdGhpcy5hbm5vdW5jZW1lbnQudGl0bGUpIHsKICAgICAgICB0aGlzLmVycm9yLnRpdGxlLmlzU2hvdyA9IHRydWU7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICBpZiAoIXRoaXMuYW5ub3VuY2VtZW50LmNvbnRlbnQpIHsKICAgICAgICB0aGlzLmVycm9yLmNvbnRlbnQuaXNTaG93ID0gdHJ1ZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sCiAgY29tcG9uZW50czogewogICAgVGlueW1jZTogVGlueW1jZQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,OAAA,OAAA,MAAA,sBAAA;AACA,OAAA,eAAA,MAAA,oBAAA;AACA,SAAA,UAAA,QAAA,MAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,YAAA,EAAA;AACA,QAAA,OAAA,EAAA,EADA;AAEA,QAAA,KAAA,EAAA,EAFA;AAGA,QAAA,EAAA,EAAA,EAHA;AAIA,QAAA,QAAA,EAAA;AAJA,OADA;AAOA,MAAA,KAAA,EAAA;AACA,QAAA,KAAA,EAAA;AACA,UAAA,MAAA,EAAA,KADA;AAEA,UAAA,OAAA,EAAA;AAFA,SADA;AAKA,QAAA,OAAA,EAAA;AACA,UAAA,MAAA,EAAA,KADA;AAEA,UAAA,OAAA,EAAA;AAFA;AALA;AAPA,KAAA;AAkBA,GApBA;AAqBA,EAAA,QAAA,oBACA,UAAA,CAAA,CACA,cADA,CAAA,CADA,CArBA;AA0BA,EAAA,OA1BA,qBA0BA;AAAA;;AACA,QAAA,EAAA,GAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA;;AACA,QAAA,EAAA,EAAA;AACA,WAAA,YAAA,CAAA,EAAA,GAAA,EAAA;AACA,MAAA,eAAA,CAAA,mBAAA,CAAA,KAAA,YAAA,CAAA,EAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,YAAA,GAAA,QAAA,CAAA,IAAA,CAAA,YAAA;AACA,OAFA;AAGA;AACA,GAlCA;AAmCA,EAAA,OAAA,EAAA;AACA,IAAA,IADA,gBACA,IADA,EACA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,IAAA;AACA,KAHA;AAIA,IAAA,UAJA,sBAIA,KAJA,EAIA;AACA,WAAA,KAAA,CAAA,KAAA,EAAA,MAAA,GAAA,KAAA;AACA,KANA;AAOA,IAAA,eAPA,6BAOA;AAAA;;AACA,UAAA,KAAA,iBAAA,EAAA,EAAA;AACA,YAAA,KAAA,MAAA,CAAA,MAAA,CAAA,EAAA,EAAA;AACA,UAAA,eAAA,CAAA,kBAAA,CAAA,KAAA,YAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA;AACA,cAAA,IAAA,EAAA,SADA;AAEA,cAAA,OAAA,EAAA;AAFA,aAAA;;AAIA,YAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,oBAAA;AACA,WANA;AAOA,SARA,MAQA;AACA,eAAA,YAAA,CAAA,QAAA,GAAA,KAAA,YAAA,CAAA,EAAA;AACA,UAAA,eAAA,CAAA,eAAA,CAAA,KAAA,YAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,YAAA,MAAA,CAAA,QAAA,CAAA;AACA,cAAA,IAAA,EAAA,SADA;AAEA,cAAA,OAAA,EAAA;AAFA,aAAA;;AAIA,YAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA,oBAAA;AACA,WANA;AAOA;AACA;AACA,KA5BA;AA6BA,IAAA,iBA7BA,+BA6BA;AACA,UAAA,CAAA,KAAA,YAAA,CAAA,KAAA,EAAA;AACA,aAAA,KAAA,CAAA,KAAA,CAAA,MAAA,GAAA,IAAA;AACA,eAAA,KAAA;AACA;;AAEA,UAAA,CAAA,KAAA,YAAA,CAAA,OAAA,EAAA;AACA,aAAA,KAAA,CAAA,OAAA,CAAA,MAAA,GAAA,IAAA;AACA,eAAA,KAAA;AACA;;AAEA,aAAA,IAAA;AACA;AAzCA,GAnCA;AA8EA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA;AADA;AA9EA,CAAA","sourcesContent":["<template>\r\n    <div class=\"announcement-upload-container\">\r\n        <div class=\"head-row\">\r\n            <div class=\"title-wrapper\">\r\n                <div class=\"title-field\">Title:</div>\r\n                <el-input v-model=\"announcement.title\" \r\n                    @input=\"clearError('title')\" \r\n                    placeholder=\"Please key in project title\" \r\n                    :class=\"{ 'has-error': error.title.isShow}\" \r\n                    class=\"title-input\">\r\n                </el-input>\r\n            </div>\r\n            <div class=\"title-error-wrapper error-notification\" v-show=\"error.title.isShow\">{{error.title.message}}</div>\r\n            <div class=\"btn-wrapper\">\r\n                <el-button type=\"danger\" @click=\"goto('/announcement/list')\" class=\"cancel-add-btn\">Cancel</el-button>\r\n                <el-button type=\"primary\" @click=\"AddAnnouncement\" class=\"confirm-add-btn\">Confirm</el-button>\r\n            </div>\r\n        </div>\r\n        <div class=\"context-editor-wrapper\">\r\n            <tinymce v-model=\"announcement.content\" :height=\"600\" @input=\"clearError('content')\"/>\r\n            <div class=\"content-error-wrapper error-notification\" v-show=\"error.content.isShow\">{{error.content.message}}</div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Tinymce from '@/components/Tinymce'\r\nimport announcementApi from '@/api/announcement'\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n    data() {\r\n        return {\r\n            announcement: {\r\n                content: '',\r\n                title: '',\r\n                id: '',\r\n                authorId: ''\r\n            },\r\n            error: {\r\n                title: {\r\n                    isShow: false,\r\n                    message: 'Title cannot be empty'\r\n                },\r\n                content: {\r\n                    isShow: false,\r\n                    message: 'Content cannot be empty'\r\n                }\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters([\r\n            'currentAdmin'\r\n        ])\r\n    },\r\n    created() {\r\n        let id = this.$route.params.id\r\n        if (id) {\r\n            this.announcement.id = id\r\n            announcementApi.getAnnouncementInfo(this.announcement.id).then((response) => {\r\n                this.announcement = response.data.announcement\r\n            })\r\n        }\r\n    },\r\n    methods: {\r\n        goto(path) {\r\n            this.$router.push(path)\r\n        },\r\n        clearError(label) {\r\n            this.error[label].isShow = false\r\n        },\r\n        AddAnnouncement() {\r\n            if (this.validateBeforeAdd()) {\r\n                if (this.$route.params.id) {\r\n                    announcementApi.updateAnnouncement(this.announcement).then((response) => {\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: 'Update Successfully'\r\n                        })\r\n                        this.$router.push('/announcement/list') \r\n                    })\r\n                } else {\r\n                    this.announcement.authorId = this.currentAdmin.id\r\n                    announcementApi.addAnnouncement(this.announcement).then((response) => {\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: 'Add Successfully'\r\n                        })\r\n                        this.$router.push('/announcement/list')\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        validateBeforeAdd() {\r\n            if (!this.announcement.title) {\r\n                this.error.title.isShow = true\r\n                return false\r\n            }\r\n            \r\n            if (!this.announcement.content) {\r\n                this.error.content.isShow = true\r\n                return false\r\n            }\r\n            \r\n            return true\r\n        }\r\n    },\r\n    components: {\r\n        Tinymce\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.announcement-upload-container {\r\n    padding: 30px;\r\n    .mce-panel {\r\n        border-radius: 3px;\r\n    }\r\n    .head-row {\r\n        position: relative;\r\n    }\r\n    .title-wrapper {\r\n        display: flex;\r\n        align-items: center;\r\n        margin-bottom: 15px;\r\n        .title-field {\r\n            margin-right: 10px; \r\n        }\r\n    }\r\n    .btn-wrapper {\r\n        position: absolute;\r\n        display: flex;\r\n        top: 0;\r\n        right: 0;\r\n    }\r\n    .title-input {\r\n        width: 400px;\r\n    }\r\n    .error-notification {\r\n        font-size: 12px;\r\n        color: red;\r\n    }\r\n    .title-error-wrapper  {\r\n        margin: 0 0 15px 50px;\r\n    }\r\n    .content-error-wrapper {\r\n        margin-top: 15px;\r\n        margin-left: 15px;\r\n    }\r\n    .has-error {\r\n        ::v-deep .el-input__inner {\r\n            border-color: red !important;\r\n        }\r\n    }\r\n}\r\n</style>"],"sourceRoot":"src/views/announcement/upload"}]}