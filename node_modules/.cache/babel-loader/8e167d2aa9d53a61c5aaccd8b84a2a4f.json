{"remainingRequest":"E:\\project2\\project-allocation-web\\node_modules\\babel-loader\\lib\\index.js!E:\\project2\\project-allocation-web\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!E:\\project2\\project-allocation-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\project2\\project-allocation-web\\src\\views\\announcement\\list\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\project2\\project-allocation-web\\src\\views\\announcement\\list\\index.vue","mtime":1623142371018},{"path":"E:\\project2\\project-allocation-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\project2\\project-allocation-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\project2\\project-allocation-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\project2\\project-allocation-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBhbm5vdW5jZW1lbnRBcGkgZnJvbSAnQC9hcGkvYW5ub3VuY2VtZW50JzsKaW1wb3J0IGF2YXRhciBmcm9tICdAL2NvbXBvbmVudHMvYXZhdGFyJzsKaW1wb3J0IGNvbW1vbiBmcm9tICdAL3V0aWxzL2NvbW1vbic7CmltcG9ydCBDT05TVEFOVFMgZnJvbSAnQC91dGlscy9jb25zdGFudHMnOwppbXBvcnQgTm9EYXRhIGZyb20gJ0AvY29tcG9uZW50cy9Ob0RhdGEnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGFubm91bmNlbWVudExpc3Q6IFtdCiAgICB9OwogIH0sCiAgY29tcG9uZW50czogewogICAgYXZhdGFyOiBhdmF0YXIsCiAgICBOb0RhdGE6IE5vRGF0YQogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMuZ2V0QW5ub3VuY2VtZW50TGlzdCgpOwogIH0sCiAgbWV0aG9kczogewogICAgZ2V0QW5ub3VuY2VtZW50TGlzdDogZnVuY3Rpb24gZ2V0QW5ub3VuY2VtZW50TGlzdCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGFubm91bmNlbWVudEFwaS5nZXRBbm5vdW5jZW1lbnRMaXN0KCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5hbm5vdW5jZW1lbnRMaXN0ID0gcmVzcG9uc2UuZGF0YS5saXN0OwogICAgICB9KTsKICAgIH0sCiAgICBkZWxldGVBbm5vdW5jZW1lbnQ6IGZ1bmN0aW9uIGRlbGV0ZUFubm91bmNlbWVudChpZCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuJGNvbmZpcm0oJ0FyZSB5b3Ugc3VyZSBkZWxldGUgdGhpcyBhbm5vdW5jZW1lbnQ/JywgJ0NvbmZpcm0nLCB7CiAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICdDb25maXJtJywKICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAnQ2FuY2VsJwogICAgICB9KS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBhbm5vdW5jZW1lbnRBcGkuZGVsZXRlQW5ub3VuY2VtZW50KGlkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLAogICAgICAgICAgICBtZXNzYWdlOiAnRGVsZXRlIFN1Y2Nlc3NmdWxseScKICAgICAgICAgIH0pOwoKICAgICAgICAgIF90aGlzMi5nZXRBbm5vdW5jZW1lbnRMaXN0KCk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIHJlcGxhY2VJbWFnZTogZnVuY3Rpb24gcmVwbGFjZUltYWdlKGNvbnRlbnQpIHsKICAgICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvPGltZy4qPz4vZywgJyBbaW1hZ2VdICcpOwogICAgICByZXR1cm4gY29udGVudDsKICAgIH0sCiAgICBnb0VkaXQ6IGZ1bmN0aW9uIGdvRWRpdChpZCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2Fubm91bmNlbWVudC9lZGl0LycgKyBpZCk7CiAgICB9CiAgfSwKICBmaWx0ZXJzOiB7CiAgICBmb3JtYXRUaW1lOiBmdW5jdGlvbiBmb3JtYXRUaW1lKHRpbWUpIHsKICAgICAgdmFyIHRpbWVEZXRhaWwgPSBjb21tb24uZ2V0RGV0YWlsc0Zyb21UaW1lc3RhbXAodGltZSk7CiAgICAgIHZhciBtb250aCA9IENPTlNUQU5UUy5NT05USF9NQVBQRVJbdGltZURldGFpbC5tb250aF07CiAgICAgIHJldHVybiBtb250aCArICcgJyArIHRpbWVEZXRhaWwuZGF5ICsgJyAsICcgKyB0aW1lRGV0YWlsLnllYXIgKyAnIGF0ICcgKyB0aW1lRGV0YWlsLmhvdXJzICsgJzonICsgdGltZURldGFpbC5taW51dGVzOwogICAgfQogIH0KfTs="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAqBA,OAAA,eAAA,MAAA,oBAAA;AACA,OAAA,MAAA,MAAA,qBAAA;AACA,OAAA,MAAA,MAAA,gBAAA;AACA,OAAA,SAAA,MAAA,mBAAA;AACA,OAAA,MAAA,MAAA,qBAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,gBAAA,EAAA;AADA,KAAA;AAGA,GALA;AAMA,EAAA,UAAA,EAAA;AACA,IAAA,MAAA,EAAA,MADA;AAEA,IAAA,MAAA,EAAA;AAFA,GANA;AAUA,EAAA,OAVA,qBAUA;AACA,SAAA,mBAAA;AACA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,mBADA,iCACA;AAAA;;AACA,MAAA,eAAA,CAAA,mBAAA,GAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,QAAA,KAAA,CAAA,gBAAA,GAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA,OAFA;AAGA,KALA;AAMA,IAAA,kBANA,8BAMA,EANA,EAMA;AAAA;;AACA,WAAA,QAAA,CAAA,wCAAA,EAAA,SAAA,EAAA;AACA,QAAA,iBAAA,EAAA,SADA;AAEA,QAAA,gBAAA,EAAA;AAFA,OAAA,EAGA,IAHA,CAGA,YAAA;AACA,QAAA,eAAA,CAAA,kBAAA,CAAA,EAAA,EAAA,IAAA,CAAA,UAAA,QAAA,EAAA;AACA,UAAA,MAAA,CAAA,QAAA,CAAA;AACA,YAAA,IAAA,EAAA,SADA;AAEA,YAAA,OAAA,EAAA;AAFA,WAAA;;AAIA,UAAA,MAAA,CAAA,mBAAA;AACA,SANA;AAQA,OAZA;AAaA,KApBA;AAqBA,IAAA,YArBA,wBAqBA,OArBA,EAqBA;AACA,MAAA,OAAA,GAAA,OAAA,CAAA,OAAA,CAAA,WAAA,EAAA,WAAA,CAAA;AACA,aAAA,OAAA;AACA,KAxBA;AAyBA,IAAA,MAzBA,kBAyBA,EAzBA,EAyBA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA,wBAAA,EAAA;AACA;AA3BA,GAbA;AA0CA,EAAA,OAAA,EAAA;AACA,IAAA,UADA,sBACA,IADA,EACA;AACA,UAAA,UAAA,GAAA,MAAA,CAAA,uBAAA,CAAA,IAAA,CAAA;AACA,UAAA,KAAA,GAAA,SAAA,CAAA,YAAA,CAAA,UAAA,CAAA,KAAA,CAAA;AAEA,aAAA,KAAA,GAAA,GAAA,GAAA,UAAA,CAAA,GAAA,GAAA,KAAA,GAAA,UAAA,CAAA,IAAA,GAAA,MAAA,GAAA,UAAA,CAAA,KAAA,GAAA,GAAA,GAAA,UAAA,CAAA,OAAA;AACA;AANA;AA1CA,CAAA","sourcesContent":["<template>\r\n    <div class=\"announcement-list-container\">\r\n        <perfect-scrollbar class=\"background-container\" v-if=\"announcementList && announcementList.length > 0\">\r\n            <div class=\"announcement-wrapper\" v-for=\"announcement in announcementList\" :key=\"announcement.id\">\r\n                <div class=\"announcement-left\">\r\n                    <avatar :avatarUrl=\"announcement.author.avatar\" width=\"40\"></avatar>\r\n                </div>\r\n                <div class=\"announcement-right\">\r\n                    <div class=\"title\" @click=\"goEdit(announcement.id)\">{{announcement.title}}</div>\r\n                    <div class=\"time\">{{announcement.time | formatTime}}</div>\r\n                    <div class=\"author\" v-if=\"announcement.author\">{{announcement.author.name}}</div>\r\n                    <div class=\"content\" @click=\"goEdit(announcement.id)\" v-html=\"replaceImage(announcement.content)\"></div>\r\n                    <i class=\"el-icon-delete delete-announcement\" @click=\"deleteAnnouncement(announcement.id)\"></i>\r\n            </div>\r\n        </div>\r\n        </perfect-scrollbar>\r\n        <no-data v-else></no-data>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport announcementApi from '@/api/announcement'\r\nimport avatar from '@/components/avatar'\r\nimport common from '@/utils/common'\r\nimport CONSTANTS from '@/utils/constants'\r\nimport NoData from '@/components/NoData'\r\nexport default {\r\n    data() {\r\n        return {\r\n            announcementList: []\r\n        }\r\n    },\r\n    components: {\r\n        avatar,\r\n        NoData\r\n    },\r\n    created() {\r\n        this.getAnnouncementList()\r\n    },\r\n    methods: {\r\n        getAnnouncementList() {\r\n            announcementApi.getAnnouncementList().then((response) => {\r\n                this.announcementList = response.data.list\r\n            })\r\n        },\r\n        deleteAnnouncement(id) {\r\n            this.$confirm('Are you sure delete this announcement?', 'Confirm', {\r\n                confirmButtonText: 'Confirm',\r\n                cancelButtonText: 'Cancel'\r\n            }).then(() => {\r\n                announcementApi.deleteAnnouncement(id).then((response) => {\r\n                    this.$message({\r\n                        type: 'success',\r\n                        message: 'Delete Successfully'\r\n                    })\r\n                    this.getAnnouncementList()\r\n                })\r\n\r\n            })\r\n        },\r\n        replaceImage (content) {\r\n            content = content.replace(/<img.*?>/g, ' [image] ')\r\n            return content;\r\n        },\r\n        goEdit(id) {\r\n            this.$router.push('/announcement/edit/' + id)\r\n        },\r\n    },\r\n    filters: {\r\n        formatTime(time) {\r\n            let timeDetail = common.getDetailsFromTimestamp(time)\r\n            let month = CONSTANTS.MONTH_MAPPER[timeDetail.month]\r\n\r\n            return month + ' ' + timeDetail.day + ' , ' + timeDetail.year + ' at ' + timeDetail.hours + ':' + timeDetail.minutes\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.announcement-list-container {\r\n    padding: 40px;\r\n    height: calc(100vh - 70px);\r\n    box-sizing: border-box;\r\n    .background-container {\r\n        padding: 30px 20px 20px;\r\n        box-sizing: border-box;\r\n    }\r\n    .announcement-wrapper {\r\n        background-color: #ffffff;\r\n        height: calc(33% - 51px);\r\n        box-shadow: 1px 3px 6px rgba(0, 0, 0, .15);\r\n        padding: 20px;\r\n        position: relative;\r\n        display: flex;\r\n        overflow: hidden;\r\n        &:not(:last-child) {\r\n            margin-bottom: 20px;\r\n        }\r\n        .title {\r\n            font-size: 18px;\r\n            font-weight: bold;\r\n            margin-bottom: 10px;\r\n            overflow: hidden;\r\n            white-space: nowrap;\r\n            text-overflow: ellipsis;\r\n            width: 600px;\r\n            cursor: pointer;\r\n        }\r\n        .time {\r\n            position: absolute;\r\n            color: #BFCBD9;\r\n            top: 20px;\r\n            right: 20px;\r\n        }\r\n        .author {\r\n            font-size: 14px;\r\n            color: #9F9F9F;\r\n            margin-bottom: 10px;\r\n        }\r\n        .content {\r\n            font-size: 16px;\r\n            word-break: break-all;\r\n            white-space: break-spaces;\r\n            display: -webkit-box;\r\n            -webkit-box-orient: vertical;\r\n            -webkit-line-clamp: 5;\r\n            overflow: hidden;\r\n            line-height: 1.5;\r\n            cursor: pointer;\r\n            margin-top: -18px;\r\n        }\r\n        .delete-announcement {\r\n            position: absolute;\r\n            bottom: 20px;\r\n            right: 20px;\r\n            font-size: 18px;\r\n            color: #A7AAAE;\r\n            cursor: pointer;\r\n        }\r\n    }\r\n    .background-container {\r\n        background-color: #F7F7F7;\r\n        height: 100%;\r\n        box-shadow: 1px 3px 6px rgba(0, 0, 0, .15);\r\n    }\r\n    .announcement-left {\r\n        vertical-align: top;\r\n        .avatar-wrapper {\r\n            margin-right: 20px !important;\r\n            cursor: initial;\r\n        }\r\n    }\r\n    .announcement-right {\r\n    }\r\n}\r\n</style>"],"sourceRoot":"src/views/announcement/list"}]}