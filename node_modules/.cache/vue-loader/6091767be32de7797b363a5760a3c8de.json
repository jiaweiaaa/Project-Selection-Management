{"remainingRequest":"E:\\project2\\project-allocation-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\project2\\project-allocation-web\\src\\views\\announcement\\upload\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\project2\\project-allocation-web\\src\\views\\announcement\\upload\\index.vue","mtime":1623142371019},{"path":"E:\\project2\\project-allocation-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\project2\\project-allocation-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\project2\\project-allocation-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\project2\\project-allocation-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgVGlueW1jZSBmcm9tICdAL2NvbXBvbmVudHMvVGlueW1jZScNCmltcG9ydCBhbm5vdW5jZW1lbnRBcGkgZnJvbSAnQC9hcGkvYW5ub3VuY2VtZW50Jw0KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnDQpleHBvcnQgZGVmYXVsdCB7DQogICAgZGF0YSgpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAgIGFubm91bmNlbWVudDogew0KICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnLA0KICAgICAgICAgICAgICAgIHRpdGxlOiAnJywNCiAgICAgICAgICAgICAgICBpZDogJycsDQogICAgICAgICAgICAgICAgYXV0aG9ySWQ6ICcnDQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgZXJyb3I6IHsNCiAgICAgICAgICAgICAgICB0aXRsZTogew0KICAgICAgICAgICAgICAgICAgICBpc1Nob3c6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVGl0bGUgY2Fubm90IGJlIGVtcHR5Jw0KICAgICAgICAgICAgICAgIH0sDQogICAgICAgICAgICAgICAgY29udGVudDogew0KICAgICAgICAgICAgICAgICAgICBpc1Nob3c6IGZhbHNlLA0KICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ29udGVudCBjYW5ub3QgYmUgZW1wdHknDQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfSwNCiAgICBjb21wdXRlZDogew0KICAgICAgICAuLi5tYXBHZXR0ZXJzKFsNCiAgICAgICAgICAgICdjdXJyZW50QWRtaW4nDQogICAgICAgIF0pDQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KICAgICAgICBsZXQgaWQgPSB0aGlzLiRyb3V0ZS5wYXJhbXMuaWQNCiAgICAgICAgaWYgKGlkKSB7DQogICAgICAgICAgICB0aGlzLmFubm91bmNlbWVudC5pZCA9IGlkDQogICAgICAgICAgICBhbm5vdW5jZW1lbnRBcGkuZ2V0QW5ub3VuY2VtZW50SW5mbyh0aGlzLmFubm91bmNlbWVudC5pZCkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICAgICAgICB0aGlzLmFubm91bmNlbWVudCA9IHJlc3BvbnNlLmRhdGEuYW5ub3VuY2VtZW50DQogICAgICAgICAgICB9KQ0KICAgICAgICB9DQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICAgIGdvdG8ocGF0aCkgew0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2gocGF0aCkNCiAgICAgICAgfSwNCiAgICAgICAgY2xlYXJFcnJvcihsYWJlbCkgew0KICAgICAgICAgICAgdGhpcy5lcnJvcltsYWJlbF0uaXNTaG93ID0gZmFsc2UNCiAgICAgICAgfSwNCiAgICAgICAgQWRkQW5ub3VuY2VtZW50KCkgew0KICAgICAgICAgICAgaWYgKHRoaXMudmFsaWRhdGVCZWZvcmVBZGQoKSkgew0KICAgICAgICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsNCiAgICAgICAgICAgICAgICAgICAgYW5ub3VuY2VtZW50QXBpLnVwZGF0ZUFubm91bmNlbWVudCh0aGlzLmFubm91bmNlbWVudCkudGhlbigocmVzcG9uc2UpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJywNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnVXBkYXRlIFN1Y2Nlc3NmdWxseScNCiAgICAgICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2Fubm91bmNlbWVudC9saXN0JykgDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbm5vdW5jZW1lbnQuYXV0aG9ySWQgPSB0aGlzLmN1cnJlbnRBZG1pbi5pZA0KICAgICAgICAgICAgICAgICAgICBhbm5vdW5jZW1lbnRBcGkuYWRkQW5ub3VuY2VtZW50KHRoaXMuYW5ub3VuY2VtZW50KS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdBZGQgU3VjY2Vzc2Z1bGx5Jw0KICAgICAgICAgICAgICAgICAgICAgICAgfSkNCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvYW5ub3VuY2VtZW50L2xpc3QnKQ0KICAgICAgICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfSwNCiAgICAgICAgdmFsaWRhdGVCZWZvcmVBZGQoKSB7DQogICAgICAgICAgICBpZiAoIXRoaXMuYW5ub3VuY2VtZW50LnRpdGxlKSB7DQogICAgICAgICAgICAgICAgdGhpcy5lcnJvci50aXRsZS5pc1Nob3cgPSB0cnVlDQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIGlmICghdGhpcy5hbm5vdW5jZW1lbnQuY29udGVudCkgew0KICAgICAgICAgICAgICAgIHRoaXMuZXJyb3IuY29udGVudC5pc1Nob3cgPSB0cnVlDQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgICAgICB9DQogICAgICAgICAgICANCiAgICAgICAgICAgIHJldHVybiB0cnVlDQogICAgICAgIH0NCiAgICB9LA0KICAgIGNvbXBvbmVudHM6IHsNCiAgICAgICAgVGlueW1jZQ0KICAgIH0NCn0NCg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/announcement/upload","sourcesContent":["<template>\r\n    <div class=\"announcement-upload-container\">\r\n        <div class=\"head-row\">\r\n            <div class=\"title-wrapper\">\r\n                <div class=\"title-field\">Title:</div>\r\n                <el-input v-model=\"announcement.title\" \r\n                    @input=\"clearError('title')\" \r\n                    placeholder=\"Please key in project title\" \r\n                    :class=\"{ 'has-error': error.title.isShow}\" \r\n                    class=\"title-input\">\r\n                </el-input>\r\n            </div>\r\n            <div class=\"title-error-wrapper error-notification\" v-show=\"error.title.isShow\">{{error.title.message}}</div>\r\n            <div class=\"btn-wrapper\">\r\n                <el-button type=\"danger\" @click=\"goto('/announcement/list')\" class=\"cancel-add-btn\">Cancel</el-button>\r\n                <el-button type=\"primary\" @click=\"AddAnnouncement\" class=\"confirm-add-btn\">Confirm</el-button>\r\n            </div>\r\n        </div>\r\n        <div class=\"context-editor-wrapper\">\r\n            <tinymce v-model=\"announcement.content\" :height=\"600\" @input=\"clearError('content')\"/>\r\n            <div class=\"content-error-wrapper error-notification\" v-show=\"error.content.isShow\">{{error.content.message}}</div>\r\n        </div>\r\n\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Tinymce from '@/components/Tinymce'\r\nimport announcementApi from '@/api/announcement'\r\nimport { mapGetters } from 'vuex'\r\nexport default {\r\n    data() {\r\n        return {\r\n            announcement: {\r\n                content: '',\r\n                title: '',\r\n                id: '',\r\n                authorId: ''\r\n            },\r\n            error: {\r\n                title: {\r\n                    isShow: false,\r\n                    message: 'Title cannot be empty'\r\n                },\r\n                content: {\r\n                    isShow: false,\r\n                    message: 'Content cannot be empty'\r\n                }\r\n            }\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapGetters([\r\n            'currentAdmin'\r\n        ])\r\n    },\r\n    created() {\r\n        let id = this.$route.params.id\r\n        if (id) {\r\n            this.announcement.id = id\r\n            announcementApi.getAnnouncementInfo(this.announcement.id).then((response) => {\r\n                this.announcement = response.data.announcement\r\n            })\r\n        }\r\n    },\r\n    methods: {\r\n        goto(path) {\r\n            this.$router.push(path)\r\n        },\r\n        clearError(label) {\r\n            this.error[label].isShow = false\r\n        },\r\n        AddAnnouncement() {\r\n            if (this.validateBeforeAdd()) {\r\n                if (this.$route.params.id) {\r\n                    announcementApi.updateAnnouncement(this.announcement).then((response) => {\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: 'Update Successfully'\r\n                        })\r\n                        this.$router.push('/announcement/list') \r\n                    })\r\n                } else {\r\n                    this.announcement.authorId = this.currentAdmin.id\r\n                    announcementApi.addAnnouncement(this.announcement).then((response) => {\r\n                        this.$message({\r\n                            type: 'success',\r\n                            message: 'Add Successfully'\r\n                        })\r\n                        this.$router.push('/announcement/list')\r\n                    })\r\n                }\r\n            }\r\n        },\r\n        validateBeforeAdd() {\r\n            if (!this.announcement.title) {\r\n                this.error.title.isShow = true\r\n                return false\r\n            }\r\n            \r\n            if (!this.announcement.content) {\r\n                this.error.content.isShow = true\r\n                return false\r\n            }\r\n            \r\n            return true\r\n        }\r\n    },\r\n    components: {\r\n        Tinymce\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.announcement-upload-container {\r\n    padding: 30px;\r\n    .mce-panel {\r\n        border-radius: 3px;\r\n    }\r\n    .head-row {\r\n        position: relative;\r\n    }\r\n    .title-wrapper {\r\n        display: flex;\r\n        align-items: center;\r\n        margin-bottom: 15px;\r\n        .title-field {\r\n            margin-right: 10px; \r\n        }\r\n    }\r\n    .btn-wrapper {\r\n        position: absolute;\r\n        display: flex;\r\n        top: 0;\r\n        right: 0;\r\n    }\r\n    .title-input {\r\n        width: 400px;\r\n    }\r\n    .error-notification {\r\n        font-size: 12px;\r\n        color: red;\r\n    }\r\n    .title-error-wrapper  {\r\n        margin: 0 0 15px 50px;\r\n    }\r\n    .content-error-wrapper {\r\n        margin-top: 15px;\r\n        margin-left: 15px;\r\n    }\r\n    .has-error {\r\n        ::v-deep .el-input__inner {\r\n            border-color: red !important;\r\n        }\r\n    }\r\n}\r\n</style>"]}]}