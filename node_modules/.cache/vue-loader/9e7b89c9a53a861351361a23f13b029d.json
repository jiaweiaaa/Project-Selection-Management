{"remainingRequest":"E:\\project2\\project-allocation-web\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\project2\\project-allocation-web\\src\\views\\announcement\\list\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\project2\\project-allocation-web\\src\\views\\announcement\\list\\index.vue","mtime":1623142371018},{"path":"E:\\project2\\project-allocation-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\project2\\project-allocation-web\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\project2\\project-allocation-web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\project2\\project-allocation-web\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYW5ub3VuY2VtZW50QXBpIGZyb20gJ0AvYXBpL2Fubm91bmNlbWVudCcNCmltcG9ydCBhdmF0YXIgZnJvbSAnQC9jb21wb25lbnRzL2F2YXRhcicNCmltcG9ydCBjb21tb24gZnJvbSAnQC91dGlscy9jb21tb24nDQppbXBvcnQgQ09OU1RBTlRTIGZyb20gJ0AvdXRpbHMvY29uc3RhbnRzJw0KaW1wb3J0IE5vRGF0YSBmcm9tICdAL2NvbXBvbmVudHMvTm9EYXRhJw0KZXhwb3J0IGRlZmF1bHQgew0KICAgIGRhdGEoKSB7DQogICAgICAgIHJldHVybiB7DQogICAgICAgICAgICBhbm5vdW5jZW1lbnRMaXN0OiBbXQ0KICAgICAgICB9DQogICAgfSwNCiAgICBjb21wb25lbnRzOiB7DQogICAgICAgIGF2YXRhciwNCiAgICAgICAgTm9EYXRhDQogICAgfSwNCiAgICBjcmVhdGVkKCkgew0KICAgICAgICB0aGlzLmdldEFubm91bmNlbWVudExpc3QoKQ0KICAgIH0sDQogICAgbWV0aG9kczogew0KICAgICAgICBnZXRBbm5vdW5jZW1lbnRMaXN0KCkgew0KICAgICAgICAgICAgYW5ub3VuY2VtZW50QXBpLmdldEFubm91bmNlbWVudExpc3QoKS50aGVuKChyZXNwb25zZSkgPT4gew0KICAgICAgICAgICAgICAgIHRoaXMuYW5ub3VuY2VtZW50TGlzdCA9IHJlc3BvbnNlLmRhdGEubGlzdA0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgZGVsZXRlQW5ub3VuY2VtZW50KGlkKSB7DQogICAgICAgICAgICB0aGlzLiRjb25maXJtKCdBcmUgeW91IHN1cmUgZGVsZXRlIHRoaXMgYW5ub3VuY2VtZW50PycsICdDb25maXJtJywgew0KICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAnQ29uZmlybScsDQogICAgICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ0NhbmNlbCcNCiAgICAgICAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgICAgIGFubm91bmNlbWVudEFwaS5kZWxldGVBbm5vdW5jZW1lbnQoaWQpLnRoZW4oKHJlc3BvbnNlKSA9PiB7DQogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0RlbGV0ZSBTdWNjZXNzZnVsbHknDQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0QW5ub3VuY2VtZW50TGlzdCgpDQogICAgICAgICAgICAgICAgfSkNCg0KICAgICAgICAgICAgfSkNCiAgICAgICAgfSwNCiAgICAgICAgcmVwbGFjZUltYWdlIChjb250ZW50KSB7DQogICAgICAgICAgICBjb250ZW50ID0gY29udGVudC5yZXBsYWNlKC88aW1nLio/Pi9nLCAnIFtpbWFnZV0gJykNCiAgICAgICAgICAgIHJldHVybiBjb250ZW50Ow0KICAgICAgICB9LA0KICAgICAgICBnb0VkaXQoaWQpIHsNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvYW5ub3VuY2VtZW50L2VkaXQvJyArIGlkKQ0KICAgICAgICB9LA0KICAgIH0sDQogICAgZmlsdGVyczogew0KICAgICAgICBmb3JtYXRUaW1lKHRpbWUpIHsNCiAgICAgICAgICAgIGxldCB0aW1lRGV0YWlsID0gY29tbW9uLmdldERldGFpbHNGcm9tVGltZXN0YW1wKHRpbWUpDQogICAgICAgICAgICBsZXQgbW9udGggPSBDT05TVEFOVFMuTU9OVEhfTUFQUEVSW3RpbWVEZXRhaWwubW9udGhdDQoNCiAgICAgICAgICAgIHJldHVybiBtb250aCArICcgJyArIHRpbWVEZXRhaWwuZGF5ICsgJyAsICcgKyB0aW1lRGV0YWlsLnllYXIgKyAnIGF0ICcgKyB0aW1lRGV0YWlsLmhvdXJzICsgJzonICsgdGltZURldGFpbC5taW51dGVzDQogICAgICAgIH0sDQogICAgfQ0KfQ0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;AAqBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/announcement/list","sourcesContent":["<template>\r\n    <div class=\"announcement-list-container\">\r\n        <perfect-scrollbar class=\"background-container\" v-if=\"announcementList && announcementList.length > 0\">\r\n            <div class=\"announcement-wrapper\" v-for=\"announcement in announcementList\" :key=\"announcement.id\">\r\n                <div class=\"announcement-left\">\r\n                    <avatar :avatarUrl=\"announcement.author.avatar\" width=\"40\"></avatar>\r\n                </div>\r\n                <div class=\"announcement-right\">\r\n                    <div class=\"title\" @click=\"goEdit(announcement.id)\">{{announcement.title}}</div>\r\n                    <div class=\"time\">{{announcement.time | formatTime}}</div>\r\n                    <div class=\"author\" v-if=\"announcement.author\">{{announcement.author.name}}</div>\r\n                    <div class=\"content\" @click=\"goEdit(announcement.id)\" v-html=\"replaceImage(announcement.content)\"></div>\r\n                    <i class=\"el-icon-delete delete-announcement\" @click=\"deleteAnnouncement(announcement.id)\"></i>\r\n            </div>\r\n        </div>\r\n        </perfect-scrollbar>\r\n        <no-data v-else></no-data>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport announcementApi from '@/api/announcement'\r\nimport avatar from '@/components/avatar'\r\nimport common from '@/utils/common'\r\nimport CONSTANTS from '@/utils/constants'\r\nimport NoData from '@/components/NoData'\r\nexport default {\r\n    data() {\r\n        return {\r\n            announcementList: []\r\n        }\r\n    },\r\n    components: {\r\n        avatar,\r\n        NoData\r\n    },\r\n    created() {\r\n        this.getAnnouncementList()\r\n    },\r\n    methods: {\r\n        getAnnouncementList() {\r\n            announcementApi.getAnnouncementList().then((response) => {\r\n                this.announcementList = response.data.list\r\n            })\r\n        },\r\n        deleteAnnouncement(id) {\r\n            this.$confirm('Are you sure delete this announcement?', 'Confirm', {\r\n                confirmButtonText: 'Confirm',\r\n                cancelButtonText: 'Cancel'\r\n            }).then(() => {\r\n                announcementApi.deleteAnnouncement(id).then((response) => {\r\n                    this.$message({\r\n                        type: 'success',\r\n                        message: 'Delete Successfully'\r\n                    })\r\n                    this.getAnnouncementList()\r\n                })\r\n\r\n            })\r\n        },\r\n        replaceImage (content) {\r\n            content = content.replace(/<img.*?>/g, ' [image] ')\r\n            return content;\r\n        },\r\n        goEdit(id) {\r\n            this.$router.push('/announcement/edit/' + id)\r\n        },\r\n    },\r\n    filters: {\r\n        formatTime(time) {\r\n            let timeDetail = common.getDetailsFromTimestamp(time)\r\n            let month = CONSTANTS.MONTH_MAPPER[timeDetail.month]\r\n\r\n            return month + ' ' + timeDetail.day + ' , ' + timeDetail.year + ' at ' + timeDetail.hours + ':' + timeDetail.minutes\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.announcement-list-container {\r\n    padding: 40px;\r\n    height: calc(100vh - 70px);\r\n    box-sizing: border-box;\r\n    .background-container {\r\n        padding: 30px 20px 20px;\r\n        box-sizing: border-box;\r\n    }\r\n    .announcement-wrapper {\r\n        background-color: #ffffff;\r\n        height: calc(33% - 51px);\r\n        box-shadow: 1px 3px 6px rgba(0, 0, 0, .15);\r\n        padding: 20px;\r\n        position: relative;\r\n        display: flex;\r\n        overflow: hidden;\r\n        &:not(:last-child) {\r\n            margin-bottom: 20px;\r\n        }\r\n        .title {\r\n            font-size: 18px;\r\n            font-weight: bold;\r\n            margin-bottom: 10px;\r\n            overflow: hidden;\r\n            white-space: nowrap;\r\n            text-overflow: ellipsis;\r\n            width: 600px;\r\n            cursor: pointer;\r\n        }\r\n        .time {\r\n            position: absolute;\r\n            color: #BFCBD9;\r\n            top: 20px;\r\n            right: 20px;\r\n        }\r\n        .author {\r\n            font-size: 14px;\r\n            color: #9F9F9F;\r\n            margin-bottom: 10px;\r\n        }\r\n        .content {\r\n            font-size: 16px;\r\n            word-break: break-all;\r\n            white-space: break-spaces;\r\n            display: -webkit-box;\r\n            -webkit-box-orient: vertical;\r\n            -webkit-line-clamp: 5;\r\n            overflow: hidden;\r\n            line-height: 1.5;\r\n            cursor: pointer;\r\n            margin-top: -18px;\r\n        }\r\n        .delete-announcement {\r\n            position: absolute;\r\n            bottom: 20px;\r\n            right: 20px;\r\n            font-size: 18px;\r\n            color: #A7AAAE;\r\n            cursor: pointer;\r\n        }\r\n    }\r\n    .background-container {\r\n        background-color: #F7F7F7;\r\n        height: 100%;\r\n        box-shadow: 1px 3px 6px rgba(0, 0, 0, .15);\r\n    }\r\n    .announcement-left {\r\n        vertical-align: top;\r\n        .avatar-wrapper {\r\n            margin-right: 20px !important;\r\n            cursor: initial;\r\n        }\r\n    }\r\n    .announcement-right {\r\n    }\r\n}\r\n</style>"]}]}